# Crafting Calculator. SRS document.

## 1. Introduction

### Purpose
Реализовать веб-приложение, которое позволит интуитивно понятным и удобным
способом считать сложные крафты в factorio и в перспективе в других играх. Иногда игроков может отпугнуть
сложность формирования каких-то рецептов и они не смогут полностью познать весь
процесс игры.
Цель проекта – сделать инструмент, который позволит многим игрокам более быстро и
безболезненно играть в factorio и получать желаемый результат, при этом не занимаясь
рутинными вещами для крафтинга вручную.

### Document conventions
Этот документ использует следующие conventions:
- деплой - приведение приложения к бесперебойной и корректной работе
- БД - база данных, DB
- API - application programming interface
- МОС - модель отношений-связок, MER
- крафт - рецепт, содержит информацию о механизме, входных и выходных
материалах. 
- цепочка/дерево крафтов - граф, описывающий порядок крафтов, необходимых, чтобы
из входных материалов получить выходные. 
- рецепт - некоторый набор предметов в игре, материалов, необходимых для
получения другого определенного предмета, материала.
- книга рецептов - совокупность крафтов, отображающий всю необходимую информацию, 
нужную для построения рецепта
- крафтинг - процесс получения крафта
- боттлнек - крафт, узкое горлышко рецепта, увелечение количество данного крафта обязательно для увеличения выходящего продукта исходного рецепта

### Intended Audience and Reading Suggestions
Приложение предназначено игроков в factorio, прежде всего, для тех, кому сложно становится на каком-то
этапе планировать игру или непосредственно крафтить какие-то ресурсы, это
становится иногда слишком сложно и смешанно. Также подойдет для новичков в этой
игре, поскольку они еще не знают рецепты, и такой инструмент поможет им быстрее
освоиться и понять разные рецепты и запомнить даже некоторые. Приложение будет разработано под open-source.

### Project scope
Объем работ в проекте:
- разработка контрактов
- план взаимодействия фронтенда и бэкенда
- план деплоя приложения
- разработка алгоритма, который должен будет отдавать клиенту дерево производства, учитывая ограничения
- корректное отображение рецепта, возможность сохранения и загрузки рецепта
- разработка API на стороне бэкенда
- разработка схемы БД, взаимодействия различных таблиц друг с другом посредством связей

Всего для базовой версии проекта - а это версия для крафтинга только в factorio, потребуется 2 месяца времени.

### References
Игра референс - factorio, на основе которой и будет разработано приложение.
Возможные расширения - разлиичные модификации игры factorio, а также другие игры.

## 2. Overall description

### Product perspective
Продукт предназначен для разных пользователей: как для обычных, так и для продвинутых.

Для обычных представляем возможность выбрать из уже доступных "книг рецептов" нужную спецификацию в игре.
Для продвинутых представляем возмоность написать собственный Endpoint, по специальному контракту, используемый для построения спецефичных рецептов, не продоставленных базовым функционалом сайта.

### Product features
Пользователь должен иметь возможность получить крафт по предмету, который он хочет получить в игре.

Основные функции, которые предоставляет сайт:
- Посмотреть дерево рецептов
- Иметь возможность раскрывать различные рецепты, чтобы продолжать постройку крафта
- Возможность сохранять рецепт, доступный на определенный промежуток времени (аналог pastebin)

Дополнительный функционал:
- Предоставление контракта, по которому взаимодействует постройка рецепта на сайте
- Функционал специализровать книгу рецептов для сайта, с возможностью написать собственную книгу.

### User class and characteristics

Обычный пользователь:
- может получать необходимые рецепты, 
- может искать уже написанные книги рецептов
- может сохранять/смотреть рецепты
Администратор:
- может добавлять некоторые рецепты или удалять неактуальные, неверные рецепты
- актуализировать информацию

### Operating environment
Рабочая среда проекта следующая:
- операционная система: Linux Ubuntu
- языки программирования и фреймворки: Golang, JavaScript (React)
- реляционная база данных: PostgreSQL 15.3
- среды развертывания приложения: k8s, Docker Compose
- среды работы с кодовой базой и GUI базы данных: Goland, Visual Studio Code, pgAdmin
### Design and implementation constraints
Некоторые рецепты могут быть слишком большими, настолько, что придется перелистывать окно вниз или вправо, чтобы увидеть весь рецепт. Здесь придется подумать о том, как оптимальнее
сделать размер карточек и элементов на стороне клиента. Например, в зависимости от количества карточек можно увеличивать/уменьшать их размер перед отрисовкой клиенту.
### Assumption and dependencies
В предположении игры, мы расчитаем на книги рецептов, в котором будут отсутствовать циклические зависимости.

Также формат книги рецептов, будет соответсвовать формату игры "factorio", что конкретно означает следующее:
- Рецепт зависит *только* от текущего производителя и входных материалов
- Рецепт требует детерменированное время и детеременированное количество каждого входного ресурса в
- Рецепт производит только один материал, также в детерминированном количестве.
- Возможность различных ускорителей, которые будут увеличивать или уменьшать время/скорость/количество входных или выходных материалов

## 3. System features

### System feature 1
### Description and priority
Базовый функционал, который позволяет смотреть рецепты, раскрывать их, редактировать входящие/выходящие материалы, смотреть на боттлнеки.

Это фича имеет максимальный приоритет, так как составляет основу сайта.

### Stimulus/Response sequences
- Пользователь заходит на сайт
- Смотрит нужный рецепт, раскрывая и редактируя его под нужды в игре
- Реализует его в игре

### Functional requirements 
Функциональные требования заключаются в следующем:
- Фронтенд, предоставляющий показ рецептов, взимодействие с бекендом
- Бэкенд, которые отвечает за постройку самого рецепта, просчитывание нужных количеств, вычисление боттлнеков

### System feature 2
### Description and priority
Дополнительный функционал, который позволяет сохранять и искать по рецептам

Это фича имеет средний приоритет.

### Stimulus/Response sequences
- Пользователь заходит на сайт, делает определенный рецепт, сохраняет его
- Делится с людьми, играющие с ним в одной игре
- Имеет возможность в течение определенного периода всегда зайти и посмотреть сохраненный рецепт

### Functional requirements 
Функциональные требования заключаются в следующем:
- База данных, сохраняющий рецепт. Было решено выбрать postgres, из-за ее реляционности и огромного сообщества поддержки
- Фронтенд в связке с бэкендом, который позволяет сохранять и показывать рецепты.

## 4. External interface requirements

### User interfaces

Так-как сам проект для взаимодействия с пользователем предоставляем сайт,
требования к интерфейсу пользователю: Иметь возможноость просматривать сайт с телефона, так и с ПК.   

### Hardware interfaces

Браузер, поддерживающий HTML & Javascript.

### Software interfaces

### Communication interfaces

Этот проект должен поддерживать все версии браузеров, выпущенные в течение 5 лет, начиная с 01.01.2023

## 5. Nonfunctional requirements
### Perfomance requirements
Сайт должны поддерживать в пике до 10 запросов в секунду на сохранение/чтение рецептов.
Также время загрузки сайта не должно превышать 5 секунд.
### Safety requirements
Проект должен поддерживать бэкап базы данных, а также реплицирование данных, из-за возможности отказа одного из дата-центров.
### Software quality attributes
Основные атрибуты качества, заключаются в следующем:
- *Доступность*. Заключается в возможности получить доступ к сайту
- *Корректность*. Заключается в корректноксти отображения или сохранения рецепта
- *Надежность*. Поддержание последних версий веб-интерфейсов и браузеов
### Security requirements
Из-за возможностей предоставления специальной книги рецептов под контроль пользователей, мы должны гарантировать, что любое взаимодействие ответа от их сервиса не должно влияет другие рецепты, а также любые части программы, не связанные с их книгой рецептов.
Также мы должны гарантировать, что обычный пользователь не должен иметь возможность получить доступ к базе данных всех рецептов, в том числе получить какие-либо персональные данные пользователей.

# Roadmap
**TBD**
# Issues list
**TBA**
